id: MOTION-XXXX
title: "Add GPU-accelerated [effect name] with real-time parameter feedback"
risk_tier: 2
mode: feature
change_budget:
  max_files: 25
  max_loc: 1200
blast_radius:
  modules: ["renderer", "effects", "timeline", "preview"]
  data_migration: false
operational_rollback_slo: "15m"
threats:
  - "Performance regression on low-end GPUs"
  - "Color accuracy drift across different color spaces"
  - "Inconsistent behavior between preview and export rendering"
scope:
  in: ["[effect name] implementation", "GPU shader optimization", "real-time parameter preview", "color space handling"]
  out: ["3D lighting effects", "particle systems", "advanced color grading"]
invariants:
  - "[Effect name] maintains deterministic output across all supported GPUs"
  - "Real-time parameter changes reflect immediately in timeline preview (≤16ms response)"
  - "[Effect name] preserves alpha channel and layer blending modes"
  - "Performance impact ≤5% on existing compositions with similar effects"
acceptance:
  - id: A1
    given: "composition with 50+ layers including text, shapes, and media"
    when:  "apply [effect name] with intensity=0.8, radius=20, color=#FF6B35"
    then:  "[effect name] renders correctly in real-time preview; exported ProRes matches preview within ΔE < 1.0"
  - id: A2
    given: "[effect name] applied to layer with alpha transparency"
    when:  "scrub timeline at 60fps"
    then:  "smooth playback without frame drops; alpha compositing preserved"
  - id: A3
    given: "[effect name] with extreme parameters (radius=100, intensity=2.0)"
    when:  "render at 4K resolution"
    then:  "graceful fallback to software rendering if GPU memory insufficient"
non_functional:
  a11y: ["[effect name] supports reduced motion preferences", "parameter controls keyboard accessible", "effect preview announced to screen readers"]
  perf: { render_thread_ms: 8, memory_mb: 256, gpu_memory_mb: 512 }
  security: ["shader inputs sanitized", "GPU memory bounds checked", "no resource leaks in effect lifecycle"]
contracts:
  - type: openapi
    path: "apps/contracts/scene-graph-api.yaml#/effects/[effect-name]"
  - type: openapi
    path: "apps/contracts/timeline-api.yaml#/preview-updates"
observability:
  logs: ["[effect_name]_effect.render_time", "[effect_name]_effect.parameter_change", "[effect_name]_effect.gpu_memory_usage"]
  metrics: ["[effect_name]_effect_success_rate", "[effect_name]_effect_avg_render_time", "[effect_name]_effect_memory_peak"]
  traces: ["[effect_name]_effect span with layer_id, parameters, render_context"]
migrations: []
rollback: ["feature flag kill-switch; shader cache invalidation; parameter reset to defaults"]
